<!DOCTYPE html>
<html>





<head>
  <title>Quarkus - Soporte de autenticación incorporado</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src https://dpm.demdex.net; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com https://static.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com https://app.mailjet.com http://www.youtube.com http://www.googleadservices.com https://googleads.g.doubleclick.net https://dpm.demdex.net https://giscus.app; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self'; frame-src https://www.googletagmanager.com https://www.youtube.com https://embed.restream.io https://app.mailjet.com https://giscus.app; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/guides/security-built-in-authentication" />
  <meta property="og:title" content="Soporte de autenticación incorporado" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/security-built-in-authentication">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
    </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Acerca de <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">¿QUE ES QUARKUS?</a></li>
          <li><a href="/container-first" class="">CONTENEDOR PRIMERO</a></li>
          <li><a href="/continuum" class="">REACTIVO</a></li>
          <li><a href="/developer-joy" class="">SATISFACCION DEL DESARROLLADOR</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">ESTANDARES</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Aprende <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">EMPEZAR</a></li>
          <li><a href="/guides" class="active">GUIAS</a></li>
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">LIBROS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SOPORTE</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSIONES</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTOS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="/publications" class="">PUBLICACIONES</a></li>
          <li><a href="/awards" class="">PREMIOS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">Empezar
a codificar</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://ja.quarkus.io/">日本語 - JAPANESE</a></li>
          <li><a href="https://cn.quarkus.io/">简体中文 - CHINESE</a></li>
          </ul>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    



<div class="full-width-version-bg grey align-self">
  <div class="grid-wrapper">
    <div class="grid__item width-6-12">
      <p class="returnlink"><i class="fas fa-angle-left"></i><a href="/guides/"> Back to Guides</a></p>
    </div>
    <div class="grid__item width-6-12 align-self-center text-right hide-mobile">
      <label id="guide-version-label">Select Guide Version</label>
      <select id="guide-version-dropdown">
        
      
        
        
        
        
          
        <option value="main" >Main - SNAPSHOT</option>
        
        
      
        
        
        
        
          
        <option value="latest" selected>2.9 - Latest</option>
        
        
      
        
        
        
        
          
        <option value="2.7" >2.7</option>
        
        
      
        
        
        
        
      
        
        
        
        
      
    
      </select>
    </div>
  </div>
</div>

<div class="grid-wrapper guide">
  <div class="grid__item width-12-12 width-12-12-mobile">
    <h1 class="text-caps">Soporte de autenticación incorporado </h1>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#basic-auth">Autenticación básica</a></li>
<li><a href="#form-auth">Autenticación basada en formularios</a></li>
<li><a href="#mutual-tls">Autenticación mutua TLS</a>
<ul class="sectlevel2">
<li><a href="#autorización">Autorización</a></li>
</ul>
</li>
<li><a href="#proactive-authentication">Autenticación proactiva</a>
<ul class="sectlevel2">
<li><a href="#cómo-personalizar-las-respuestas-de-excepción-de-autenticación">Cómo personalizar las respuestas de excepción de autenticación</a></li>
</ul>
</li>
<li><a href="#referencias">Referencias</a></li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Este documento describe los mecanismos de autenticación incorporados en Quarkus para la autenticación FORM basada en HTTP, BASIC y Mutual TLS, así como la autenticación proactiva.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="basic-auth"><a class="anchor" href="#basic-auth"></a>Autenticación básica</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para habilitar la autenticación básica configure <code>quarkus.http.auth.basic=true</code>. También debe tener instalada al menos una extensión que proporcione un nombre de usuario/contraseña basado en <code>IdentityProvider</code>, como <a href="security-jdbc.html">Elytron JDBC</a>.</p>
</div>
<div class="paragraph">
<p>Para más información, consulte <a href="security.html#identity-providers">Proveedores de Identidad de Seguridad</a>.</p>
</div>
<div class="paragraph">
<p>Consulte también la sección <a href="security-testing.html#configuring-user-information">Configuración de la información del usuario en application.properties</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="form-auth"><a class="anchor" href="#form-auth"></a>Autenticación basada en formularios</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus proporciona una autenticación basada en formularios que funciona de manera similar a la autenticación tradicional basada en formularios Servlet. A diferencia de la autenticación tradicional de formularios, el usuario autenticado no se almacena en una sesión HTTP, ya que Quarkus no proporciona soporte para sesiones HTTP agrupadas. En su lugar, la información de autenticación se almacena en una cookie encriptada, que puede ser leída por todos los miembros del clúster (siempre que todos compartan la misma clave de encriptación).</p>
</div>
<div class="paragraph">
<p>La clave de encriptación puede establecerse utilizando la propiedad <code>quarkus.http.auth.session.encryption-key</code>, y debe tener al menos 16 caracteres. Esta clave se convierte en hash utilizando SHA-256 y el resumen resultante se utiliza como clave para el cifrado AES-256 del valor de la cookie. Esta cookie contiene una hora de caducidad como parte del valor cifrado, por lo que todos los nodos del clúster deben tener sus relojes sincronizados. A intervalos de un minuto se generará una nueva cookie con una hora de caducidad actualizada si la sesión está en uso.</p>
</div>
<div class="paragraph">
<p>Las siguientes propiedades se pueden utilizar para configurar la autentificación basada en formularios:</p>
</div>
<div class="paragraph configuration-legend">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> Configuration property fixed at build time - All other configuration properties are overridable at runtime</p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-vertx-http-config-group-form-auth-config_configuration"></a><a href="#quarkus-vertx-http-config-group-form-auth-config_configuration">Configuration property</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.enabled"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.enabled">quarkus.http.auth.form.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If form authentication is enabled</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.login-page"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.login-page">quarkus.http.auth.form.login-page</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The login page</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>/login.html</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.post-location"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.post-location">quarkus.http.auth.form.post-location</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The post location.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>/j_security_check</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.username-parameter"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.username-parameter">quarkus.http.auth.form.username-parameter</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The username field name.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>j_username</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.password-parameter"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.password-parameter">quarkus.http.auth.form.password-parameter</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The password field name.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>j_password</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.error-page"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.error-page">quarkus.http.auth.form.error-page</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The error page</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>/error.html</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.landing-page"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.landing-page">quarkus.http.auth.form.landing-page</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The landing page to redirect to if there is no saved page to redirect back to</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>/index.html</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.redirect-after-login"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.redirect-after-login">quarkus.http.auth.form.redirect-after-login</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Option to disable redirect to landingPage if there is no saved page to redirect back to. Form Auth POST is followed by redirect to landingPage by default.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.location-cookie"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.location-cookie">quarkus.http.auth.form.location-cookie</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Option to control the name of the cookie used to redirect the user back to where he want to get access to.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>quarkus-redirect-location</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.timeout"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.timeout">quarkus.http.auth.form.timeout</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The inactivity (idle) timeout When inactivity timeout is reached, cookie is not renewed and a new login is enforced.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>PT30M</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.new-cookie-interval"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.new-cookie-interval">quarkus.http.auth.form.new-cookie-interval</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>How old a cookie can get before it will be replaced with a new cookie with an updated timeout, also referred to as "renewal-timeout". Note that smaller values will result in slightly more server load (as new encrypted cookies will be generated more often), however larger values affect the inactivity timeout as the timeout is set when a cookie is generated. For example if this is set to 10 minutes, and the inactivity timeout is 30m, if a users last request is when the cookie is 9m old then the actual timeout will happen 21m after the last request, as the timeout is only refreshed when a new cookie is generated. In other words no timeout is tracked on the server side; the timestamp is encoded and encrypted in the cookie itself and it is decrypted and parsed with each request.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>PT1M</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.cookie-name"></a><code><a href="#quarkus-vertx-http-config-group-form-auth-config_quarkus.http.auth.form.cookie-name">quarkus.http.auth.form.cookie-name</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The cookie that is used to store the persistent session</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>quarkus-credential</code></p></td>
</tr>
</tbody>
</table>
<div id="duration-note-anchor" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">About the Duration format</div>
<div class="paragraph">
<p>El formato de las duraciones utiliza el formato estándar <code>java.time.Duration</code>. Puede obtener más información al respecto en <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-">Duration#parse() javadoc</a>.</p>
</div>
<div class="paragraph">
<p>También puede proporcionar valores de duración que empiecen por un número. En este caso, si el valor consiste sólo en un número, el conversor trata el valor como segundos. En caso contrario, <code>PT</code> se antepone implícitamente al valor para obtener un formato estándar <code>java.time.Duration</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutual-tls"><a class="anchor" href="#mutual-tls"></a>Autenticación mutua TLS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus proporciona autenticación mTLS para que pueda autenticar a los usuarios basándose en sus certificados X.509.</p>
</div>
<div class="paragraph">
<p>Para utilizar este método de autenticación, primero debe habilitar SSL para su aplicación. Para más detalles, consulte la guía <a href="http-reference.html#ssl">Soporte de conexiones seguras con SSL</a>.</p>
</div>
<div class="paragraph">
<p>Una vez que su aplicación está aceptando conexiones seguras, el siguiente paso es configurar un <code>quarkus.http.ssl.certificate.trust-store-file</code> que contenga todos los certificados en los que su aplicación debe confiar, así como la forma en que su aplicación debe solicitar los certificados cuando un cliente (por ejemplo, un navegador u otro servicio) intente acceder a uno de sus recursos protegidos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.ssl.certificate.key-store-file=server-keystore.jks            <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.http.ssl.certificate.key-store-password=the_key_store_secret
quarkus.http.ssl.certificate.trust-store-file=server-truststore.jks        <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.http.ssl.certificate.trust-store-password=the_trust_store_secret
quarkus.http.ssl.client-auth=required                                      <i class="conum" data-value="3"></i><b>(3)</b>

quarkus.http.auth.permission.default.paths=/*                              <i class="conum" data-value="4"></i><b>(4)</b>
quarkus.http.auth.permission.default.policy=authenticated</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Configura un almacén de claves donde se encuentra la clave privada del servidor.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configura un almacén de confianza desde el que se van a cargar los certificados de confianza.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Define que el servidor debe pedir <strong>siempre</strong> certificados a los clientes. Puede relajar este comportamiento utilizando <code>REQUEST</code> para que el servidor siga aceptando peticiones sin certificado. Es útil cuando también se admiten métodos de autenticación distintos de mTLS.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Define una política en la que sólo los usuarios autentificados deben tener acceso a los recursos de su aplicación.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Una vez que la solicitud entrante coincida con un certificado válido en el almacén de confianza, su aplicación debería ser capaz de obtener el asunto con sólo inyectar un <code>SecurityIdentity</code> como sigue:</p>
</div>
<div id="x509-subject-example" class="listingblock">
<div class="title">Obtención del sujeto</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
SecurityIdentity identity;

@GET
@Produces(MediaType.TEXT_PLAIN)
public String hello() {
    return String.format("Hello, %s", identity.getPrincipal().getName());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>También debería poder obtener el certificado de la siguiente manera:</p>
</div>
<div id="x509-credential-example" class="listingblock">
<div class="title">Obtención del certificado</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.security.cert.X509Certificate;
import io.quarkus.security.credential.CertificateCredential;

CertificateCredential credential = identity.getCredential(CertificateCredential.class);
X509Certificate certificate = credential.getCertificate();</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="autorización"><a class="anchor" href="#autorización"></a>Autorización</h3>
<div class="paragraph">
<p>La información del certificado del cliente puede utilizarse para mejorar Quarkus <code>SecurityIdentity</code>. Por ejemplo, se pueden añadir nuevos roles después de comprobar el nombre del sujeto del certificado del cliente, etc. Consulte la sección <a href="security-customization.html#security-identity-customization">Personalización de SecurityIdentity</a> para obtener más información sobre la personalización de Quarkus <code>SecurityIdentity</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proactive-authentication"><a class="anchor" href="#proactive-authentication"></a>Autenticación proactiva</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Por defecto Quarkus hace lo que llamamos autenticación proactiva. Esto significa que si una solicitud entrante tiene una credencial entonces esa solicitud siempre será autenticada (incluso si la página de destino no requiere autenticación).</p>
</div>
<div class="paragraph">
<p>Esto significa que las solicitudes con una credencial no válida siempre serán rechazadas, incluso para las páginas públicas. Puedes cambiar este comportamiento y autenticar sólo cuando se requiera configurando <code>quarkus.http.auth.proactive=false</code>.</p>
</div>
<div class="paragraph">
<p>Si desactiva la autenticación proactiva, el proceso de autenticación sólo se ejecutará cuando se solicite una identidad, ya sea porque hay reglas de seguridad que requieren que el usuario se autentique, o debido al acceso programático a la identidad actual.</p>
</div>
<div class="paragraph">
<p>Tenga en cuenta que si se utiliza la autenticación proactiva, el acceso a <code>SecurityIdentity</code> es una operación de bloqueo. Esto se debe a que la autenticación puede no haber ocurrido todavía, y el acceso puede requerir llamadas a sistemas externos como bases de datos que pueden bloquearse. Para las aplicaciones de bloqueo esto no es un problema, sin embargo, si has desactivado la autenticación en una aplicación reactiva esto fallará (ya que no puedes hacer operaciones de bloqueo en el hilo IO). Para solucionar esto, es necesario <code>@Inject</code> una instancia de <code>io.quarkus.security.identity.CurrentIdentityAssociation</code>, y llamar al método <code>Uni&lt;SecurityIdentity&gt;</code>. Entonces puedes suscribirte al <code>Uni</code> resultante y serás notificado cuando la autenticación se complete y la identidad esté disponible.</p>
</div>
<div class="sect2">
<h3 id="cómo-personalizar-las-respuestas-de-excepción-de-autenticación"><a class="anchor" href="#cómo-personalizar-las-respuestas-de-excepción-de-autenticación"></a>Cómo personalizar las respuestas de excepción de autenticación</h3>
<div class="paragraph">
<p>Por defecto, las restricciones de seguridad de la autenticación se aplican antes de que se inicie la cadena JAX-RS. Desactivar la autenticación proactiva desplaza efectivamente este proceso al momento en que la cadena JAX-RS comienza a ejecutarse haciendo así posible el uso de JAX-RS <code>ExceptionMapper</code> para capturar excepciones de autenticación de Quarkus Security como <code>io.quarkus.security.AuthenticationFailedException</code>, por ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import javax.annotation.Priority;
import javax.ws.rs.Priorities;
import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

import io.quarkus.security.AuthenticationFailedException;

@Provider
@Priority(Priorities.AUTHENTICATION)
public class AuthenticationFailedExceptionMapper implements ExceptionMapper&lt;AuthenticationFailedException&gt; {

    @Context
    UriInfo uriInfo;

    @Override
    public Response toResponse(AuthenticationFailedException exception) {
        return Response.status(401).header("WWW-Authenticate", "Basic realm=\"Quarkus\"").build();
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="referencias"><a class="anchor" href="#referencias"></a>Referencias</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="security.html">Seguridad Quarkus</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. Todas las dependencias de este proyecto están disponible bajo la <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Licencia Apache Software 2.0</a> o una licencia compatible.<br /><br />Este sitio web fue construido con <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, está alojado en <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> y es completamente de código abierto. Si quieres mejorarlo, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>crea un fork de la página web</a> y muéstranos lo que tienes.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/about">Acerca&nbsp;de</a></li>
          
            <li><a href="/blog">Blog</a></li>
          
            <li><a href="/insights">Podcast</a></li>
          
            <li><a href="/events">Eventos</a></li>
          
            <li><a href="/newsletter">Newsletter</a></li>
          
            <li><a href="/publications">Publicaciones</a></li>
          
            <li><a href="/awards">Premios</a></li>
          
            <li><a href="/security">Política&nbsp;de&nbsp;seguridad</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Síguenos</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">Twitter</a></li>
          
            <li><a href="https://www.facebook.com/quarkusio">Facebook</a></li>
          
            <li><a href="https://www.linkedin.com/company/quarkusio/">Linkedin</a></li>
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg">Youtube</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Obtener ayuda</span>
        <ul class="footer-links">
          
            <li><a href="/support">Soporte</a></li>
          
            <li><a href="/guides">Guías</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">Introducción</a></li>
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions">Discusiones</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">Lista de correo de desarrollo</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
            <li><a href="https://quarkus.io/">English</a></li>
          
            <li><a href="https://ja.quarkus.io/">Japanese</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus está hecho a base de proyectos comunitarios</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">Y muchos más...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
</body>

</html>
