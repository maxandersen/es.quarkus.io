<!DOCTYPE html>
<html>





<head>
  <title>Quarkus - Re-augment a Quarkus Application - 2.2</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src https://dpm.demdex.net; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com https://static.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com https://app.mailjet.com http://www.youtube.com http://www.googleadservices.com https://googleads.g.doubleclick.net https://dpm.demdex.net https://giscus.app; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self'; frame-src https://www.googletagmanager.com https://www.youtube.com https://embed.restream.io https://app.mailjet.com https://giscus.app; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/2.2/guides/reaugmentation" />
  <meta property="og:title" content="Re-augment a Quarkus Application - 2.2" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/reaugmentation">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
    </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Acerca de <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">¿QUE ES QUARKUS?</a></li>
          <li><a href="/container-first" class="">CONTENEDOR PRIMERO</a></li>
          <li><a href="/continuum" class="">REACTIVO</a></li>
          <li><a href="/developer-joy" class="">SATISFACCION DEL DESARROLLADOR</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">ESTANDARES</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Aprende <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">EMPEZAR</a></li>
          <li><a href="/guides" class="active">GUIAS</a></li>
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">LIBROS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SOPORTE</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSIONES</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTOS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="/publications" class="">PUBLICACIONES</a></li>
          <li><a href="/awards" class="">PREMIOS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">Empezar
a codificar</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://ja.quarkus.io/">日本語 - JAPANESE</a></li>
          <li><a href="https://cn.quarkus.io/">简体中文 - CHINESE</a></li>
          </ul>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    



<div class="full-width-version-bg grey align-self">
  <div class="grid-wrapper">
    <div class="grid__item width-6-12">
      <p class="returnlink"><i class="fas fa-angle-left"></i><a href="/version/2.2/guides/"> Back to Guides</a></p>
    </div>
    <div class="grid__item width-6-12 align-self-center text-right hide-mobile">
      <label id="guide-version-label">Select Guide Version</label>
      <select id="guide-version-dropdown">
        
      
        
        
        
        
          
        <option value="main" >Main - SNAPSHOT</option>
        
        
      
        
        
        
        
          
        <option value="latest" >2.9 - Latest</option>
        
        
      
        
        
        
        
          
        <option value="2.7" >2.7</option>
        
        
      
        
        
        
        
          
        <option value="2.2" selected>2.2</option>
        
        
      
        
        
        
        
      
    
      </select>
    </div>
  </div>
</div>

<div class="grid-wrapper guide">
  <div class="grid__item width-12-12 width-12-12-mobile">
    <h1 class="text-caps">Re-augment a Quarkus Application </h1>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#qué-es-el-proceso-de-aumento">¿Qué es el proceso de aumento?</a></li>
<li><a href="#cuándo-es-útil-la-re-aumentación">¿Cuándo es útil la re-aumentación?</a></li>
<li><a href="#how-to-re-augment-a-quarkus-application">How to re-augment a Quarkus application</a>
<ul class="sectlevel2">
<li><a href="#1-build-your-application-as-mutable-jar">1. Build your application as <code>mutable-jar</code></a></li>
<li><a href="#2-re-augment-your-application-with-a-different-build-time-configuration">2. Re-augment your application with a different build time configuration</a></li>
<li><a href="#3-optional-delete-the-deployments-folder">3. Optional: Delete the deployments folder</a></li>
</ul>
</li>
</ul></div>
    <div>
      <div class="sect1">
<h2 id="qué-es-el-proceso-de-aumento"><a class="anchor" href="#qué-es-el-proceso-de-aumento"></a>¿Qué es el proceso de aumento?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La configuración de la aplicación Quarkus puede incluir dos tipos de opciones de configuración:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Build time options, handled during the application build time;</p>
</li>
<li>
<p>Runtime options, that may be adjusted after the application has been built but before it has been launched.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The augmentation is a phase of an application build process during which the byte code of the application is optimized according to the application build time configuration. Initialization steps that used to happen when an EAR file was deployed on a Jakarta EE server such as parsing static configuration, creating proxy instances, etc. now happen at augmentation time. CDI beans added after augmentation won&#8217;t work (because of the missing proxy classes) as well as build time properties (e.g. <code>quarkus.datasource.db-kind</code>) changed after augmentation will be ignored. Build time properties are marked with a lock icon (<span class="icon"><i class="fa fa-lock"></i></span>) in the <a href="all-config">list of all configuration options</a>. It doesn&#8217;t matter if you use profiles or any other way to override the properties. The build time properties that were active during augmentation are baked into the build.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Re-augmentation is the process of recreating the augmentation output for a different build time configuration</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cuándo-es-útil-la-re-aumentación"><a class="anchor" href="#cuándo-es-útil-la-re-aumentación"></a>¿Cuándo es útil la re-aumentación?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Re-augmentation is useful in case the users of your application want to be able to change some of its build time properties. For instance changing the database driver or switching features on or off (e.g. <a href="opentracing">opentracing</a> or <a href="consul-config">consul-config</a>). If there are only two or three build time properties that depend on the user environment, you may consider providing alternative builds of the application. However, in case there are more such properties you may prefer shipping a mutable jar instead and let your users re-augment the application for their environment. Please notice that you won&#8217;t be able to use native images with the package type <code>mutable-jar</code>. Think of the consequences and what other options you have!</p>
</div>
<div class="paragraph">
<p>It is not a good idea to do re-augmentation at runtime unless you miss the good old times when starting up a server took several minutes and you could enjoy a cup of coffee until it was ready.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-re-augment-a-quarkus-application"><a class="anchor" href="#how-to-re-augment-a-quarkus-application"></a>How to re-augment a Quarkus application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para ejecutar los pasos de aumento se necesitan los JARs de despliegue de las extensiones de Quarkus utilizadas. Estos JARs sólo están presentes en la distribución <code>mutable-jar</code>. Esto significa que necesitas construir tu aplicación con <code>quarkus.package.type=mutable-jar</code>. La distribución <code>mutable-jar</code> es la misma que la distribución <code>fast-jar</code>, excepto por la carpeta adicional <code>quarkus-app/lib/deployment</code> que contiene los JARs de despliegue y sus dependencias (y alguna configuración del cargador de clases).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Por defecto, recibirá una advertencia si una propiedad de tiempo de compilación ha sido cambiada en tiempo de ejecución. Puede establecer la propiedad <code>quarkus.configuration.build-time-mismatch-at-runtime=fail</code> para asegurarse de que su aplicación no se inicie si hay un desajuste. Sin embargo, en el momento de redactar este documento, el cambio de <code>quarkus.datasource.db-kind</code> en tiempo de ejecución no ha fallado ni ha producido una advertencia, sino que se ha ignorado silenciosamente.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="1-build-your-application-as-mutable-jar"><a class="anchor" href="#1-build-your-application-as-mutable-jar"></a>1. Build your application as <code>mutable-jar</code></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean install -Dquarkus.package.type=mutable-jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="2-re-augment-your-application-with-a-different-build-time-configuration"><a class="anchor" href="#2-re-augment-your-application-with-a-different-build-time-configuration"></a>2. Re-augment your application with a different build time configuration</h3>
<div class="paragraph">
<p>In order to re-augment your Quarkus application with different build time properties, start the application with the desired configuration plus the <code>quarkus.launch.rebuild</code> system property set to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>The following example changes the <code>quarkus.datasource.db-kind</code> to <code>mysql</code>. For this to work the <code>mysql-extension</code> must have been included in the build. Augmentation can only use extensions that were present during compile time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar -Dquarkus.launch.rebuild=true -Dquarkus.datasource.db-kind=mysql target/quarkus-app/quarkus-run.jar</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
No importa si se utilizan propiedades del sistema, variables de entorno, perfiles o un archivo de configuración externo. La configuración actual se utilizará para el aumento (el contenido de <code>quarkus-app/quarkus</code> se sustituirá por la nueva salida de aumento). La línea de comando anterior no lanzará la aplicación. Quarkus saldrá inmediatamente después de que la aplicación haya sido re-aumentada.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="3-optional-delete-the-deployments-folder"><a class="anchor" href="#3-optional-delete-the-deployments-folder"></a>3. Optional: Delete the deployments folder</h3>
<div class="paragraph">
<p>Puedes eliminar el directorio <code>quarkus-app/lib/deployment</code> para ahorrar algo de espacio en tu distribución ZIP o imagen Docker (recuerda utilizar una construcción Docker multietapa para evitar capas innecesarias). Después de eliminar el directorio <code>deployment</code>, obviamente ya no es posible volver a aumentar la aplicación.</p>
</div>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. Todas las dependencias de este proyecto están disponible bajo la <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Licencia Apache Software 2.0</a> o una licencia compatible.<br /><br />Este sitio web fue construido con <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, está alojado en <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> y es completamente de código abierto. Si quieres mejorarlo, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>crea un fork de la página web</a> y muéstranos lo que tienes.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/about">Acerca&nbsp;de</a></li>
          
            <li><a href="/blog">Blog</a></li>
          
            <li><a href="/insights">Podcast</a></li>
          
            <li><a href="/events">Eventos</a></li>
          
            <li><a href="/newsletter">Newsletter</a></li>
          
            <li><a href="/publications">Publicaciones</a></li>
          
            <li><a href="/awards">Premios</a></li>
          
            <li><a href="/security">Política&nbsp;de&nbsp;seguridad</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Síguenos</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">Twitter</a></li>
          
            <li><a href="https://www.facebook.com/quarkusio">Facebook</a></li>
          
            <li><a href="https://www.linkedin.com/company/quarkusio/">Linkedin</a></li>
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg">Youtube</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Obtener ayuda</span>
        <ul class="footer-links">
          
            <li><a href="/support">Soporte</a></li>
          
            <li><a href="/guides">Guías</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">Introducción</a></li>
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions">Discusiones</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">Lista de correo de desarrollo</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
            <li><a href="https://quarkus.io/">English</a></li>
          
            <li><a href="https://ja.quarkus.io/">Japanese</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus está hecho a base de proyectos comunitarios</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">Y muchos más...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
</body>

</html>
